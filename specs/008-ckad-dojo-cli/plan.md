# Implementation Plan: Centralized CKAD-Dojo CLI

**Branch**: `008-ckad-dojo-cli` | **Date**: 2025-12-08 | **Spec**: [spec.md](spec.md)
**Input**: Feature specification from `/specs/008-ckad-dojo-cli/spec.md`

## Summary

Create a centralized Python CLI (`ckad-dojo`) that unifies all exam operations (setup, exam, score, cleanup) into a single entry point. The CLI provides both an interactive menu for discovery and direct command-line access for automation. It wraps existing bash scripts without modifying their functionality.

## Technical Context

**Language/Version**: Python 3.8+ (using uv as runner)
**Primary Dependencies**: Standard library only (argparse, subprocess, os, sys, pathlib)
**Storage**: N/A (stateless CLI wrapper)
**Testing**: Manual testing via script execution
**Target Platform**: Linux (with Kubernetes cluster access)
**Project Type**: Single CLI script
**Performance Goals**: CLI startup < 1 second
**Constraints**: No external Python packages (standard library only for uv compatibility)
**Scale/Scope**: Single script wrapping 4 existing bash scripts

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

| Principle | Status | Notes |
|-----------|--------|-------|
| I. Script-First Automation | PASS | Python CLI calls existing bash scripts |
| II. Kubernetes-Native Tooling | PASS | No changes to kubectl/helm usage |
| III. Automated Scoring | PASS | Reuses existing scoring via ckad-score.sh |
| IV. Exam Fidelity | PASS | No changes to exam content |
| V. Idempotent Operations | PASS | Inherits from underlying scripts |
| VI. Modern UI | PASS | Adds interactive menu as enhancement |

**Gate Status**: PASSED - No violations

## Project Structure

### Documentation (this feature)

```text
specs/008-ckad-dojo-cli/
├── spec.md              # Feature specification
├── plan.md              # This file
├── checklists/          # Quality checklists
│   └── requirements.md
└── tasks.md             # Task list (generated by /speckit.tasks)
```

### Source Code (repository root)

```text
ckad_dojo.py             # Main CLI script (single file)
pyproject.toml           # uv configuration with script entry point
```

**Structure Decision**: Single file CLI script at project root. No src/ directory needed as this is a simple wrapper script with no complex module structure. The pyproject.toml enables `uv run ckad-dojo` invocation.

## Implementation Approach

### CLI Design

```text
uv run ckad-dojo [COMMAND] [OPTIONS]

Commands:
  (no command)    Interactive menu
  exam            Exam operations (start, stop, status)
  setup           Setup exam environment
  score           Score exam answers
  cleanup         Clean up exam resources
  list            List available exams
  info            Show exam details

Global Options:
  -e, --exam      Exam ID (e.g., ckad-simulation1)
  --no-color      Disable colored output
  -h, --help      Show help
```

### Script Integration

The CLI calls existing scripts via subprocess:
- `scripts/ckad-setup.sh -e {exam}`
- `scripts/ckad-exam.sh web -e {exam}`
- `scripts/ckad-score.sh -e {exam}`
- `scripts/ckad-cleanup.sh -e {exam}`

### Interactive Menu Flow

```text
┌─────────────────────────────────────┐
│     CKAD-DOJO - Exam Simulator      │
├─────────────────────────────────────┤
│  1. Start Exam                      │
│  2. Score Exam                      │
│  3. Cleanup Environment             │
│  4. List Exams                      │
│  5. View Exam Info                  │
│  q. Quit                            │
└─────────────────────────────────────┘
```

## Complexity Tracking

No constitution violations - no complexity justification needed.
