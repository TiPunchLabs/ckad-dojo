# Implementation Plan: CKAD Simulation 4 - Norse Mythology Theme

**Branch**: `009-ckad-simulation4` | **Date**: 2025-12-09 | **Spec**: [spec.md](spec.md)
**Input**: Feature specification from `/specs/009-ckad-simulation4/spec.md`

## Summary

Create a fourth CKAD simulation exam with 22 questions covering all 5 CKAD domains using Norse mythology themed namespaces (odin, thor, loki, freya, heimdall, baldur, tyr, njord, asgard). The exam follows the established multi-exam architecture with exam.conf, questions.md, solutions.md, scoring-functions.sh, manifests, and templates.

## Technical Context

**Language/Version**: Bash 4.0+ (scripts), Python 3.8+ (web server), Markdown (questions/solutions)
**Primary Dependencies**: kubectl, helm, docker (existing tooling)
**Storage**: N/A (file-based exam content)
**Testing**: Manual testing via script execution, automated scoring validation
**Target Platform**: Linux (with Kubernetes cluster access)
**Project Type**: Content addition to existing multi-exam system
**Performance Goals**: Setup < 60 seconds, Scoring < 60 seconds
**Constraints**: Must follow existing exam architecture, no external dependencies
**Scale/Scope**: 22 questions, ~115 points, 9 namespaces, multiple pre-existing resources

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

| Principle | Status | Notes |
|-----------|--------|-------|
| I. Script-First Automation | PASS | Uses existing ckad-setup.sh, ckad-score.sh, ckad-cleanup.sh |
| II. Kubernetes-Native Tooling | PASS | Questions use kubectl, helm, docker only |
| III. Automated Scoring | PASS | scoring-functions.sh implements per-question validation |
| IV. Exam Fidelity | PASS | Questions match CKAD exam format and difficulty |
| V. Idempotent Operations | PASS | Inherits from setup-functions.sh library |
| VI. Modern UI | PASS | No changes to web interface (reuses existing) |

**Gate Status**: PASSED - No violations

## Project Structure

### Documentation (this feature)

```text
specs/009-ckad-simulation4/
├── spec.md              # Feature specification
├── plan.md              # This file
├── checklists/          # Quality checklists
│   └── requirements.md
└── tasks.md             # Task list (generated by /speckit.tasks)
```

### Source Code (repository root)

```text
exams/ckad-simulation4/                # New exam directory
├── exam.conf                          # Exam configuration (9 Norse namespaces)
├── questions.md                       # 22 questions in markdown
├── solutions.md                       # Solutions for all questions
├── scoring-functions.sh               # score_q1() through score_q22()
├── manifests/
│   └── setup/
│       ├── namespaces.yaml            # 9 Norse mythology namespaces
│       └── q*-*.yaml                  # Pre-existing resources per question
└── templates/
    └── q*-*/                          # Template files for questions
```

**Structure Decision**: Single exam directory following established pattern from ckad-simulation1/2/3. No changes to existing scripts or web interface required - the multi-exam architecture auto-discovers new exams.

## Implementation Approach

### Question Distribution (22 questions, ~115 points)

| Domain | Questions | Topics | Points |
|--------|-----------|--------|--------|
| Application Design & Build | Q1-Q6 (6) | Multi-container pods, init containers, jobs, cronjobs, PV/PVC, StorageClass | ~30 |
| Application Deployment | Q7-Q10 (4) | Deployments, scaling, rolling updates, rollbacks, Helm | ~20 |
| Services & Networking | Q11-Q14 (4) | ClusterIP, NodePort, NetworkPolicies, Ingress | ~20 |
| Environment, Config & Security | Q15-Q19 (5) | ConfigMaps, Secrets, RBAC, ServiceAccounts, SecurityContext, ResourceQuotas | ~25 |
| Observability & Maintenance | Q20-Q22 (3) | Probes, debugging, logs | ~20 |

### Namespace to Question Mapping

| Namespace | Questions | Theme |
|-----------|-----------|-------|
| odin | Q1, Q15 | All-father's realm - core pods, RBAC |
| thor | Q2, Q11 | Thunder god - jobs, services |
| loki | Q3, Q16 | Trickster - init containers, secrets |
| freya | Q4, Q12 | Love goddess - cronjobs, network policies |
| heimdall | Q5, Q17 | Guardian - PV/PVC, security contexts |
| baldur | Q6, Q13 | Light god - storageclass, ingress |
| tyr | Q7, Q18 | War god - deployments, resource quotas |
| njord | Q8-Q9, Q19 | Sea god - scaling, rollbacks, configmaps |
| asgard | Q10, Q14, Q20-Q22 | Divine realm - helm, observability |

### Post-Setup Requirements

Based on existing exams, some questions require post-setup configuration:

- Q9: Deployment with broken revision for rollback exercise (similar to simulation1 Q8, simulation3 Q8)
- Q10: Helm release in broken state for troubleshooting

## Complexity Tracking

No constitution violations - no complexity justification needed.
