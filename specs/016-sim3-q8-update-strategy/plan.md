# Implementation Plan: Sim3 Q8 Update Strategy

**Branch**: `016-sim3-q8-update-strategy` | **Date**: 2025-12-14 | **Spec**: [spec.md](spec.md)
**Input**: Feature specification from `/specs/016-sim3-q8-update-strategy/spec.md`

## Summary

Replace simulation 3 Q8 (Deployment Rollback) with a Deployment Update Strategy question (configuring RollingUpdate with maxSurge/maxUnavailable). This eliminates redundancy with sim1 Q8 which also covers rollback, ensuring each simulation tests different Kubernetes skills.

## Technical Context

**Language/Version**: Bash 4.0+ (scoring scripts), Markdown (questions/solutions)
**Primary Dependencies**: kubectl (existing tooling)
**Storage**: N/A (file-based content changes only)
**Testing**: Manual verification via script execution
**Target Platform**: Linux (with Kubernetes cluster access)
**Project Type**: Content update (no new code structure)
**Performance Goals**: N/A (no performance impact)
**Constraints**: Must maintain 6-point difficulty level for Q8
**Scale/Scope**: 3 files modified in 1 simulation

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

| Principle | Status | Notes |
|-----------|--------|-------|
| I. Script-First Automation | PASS | Modifies existing scoring-functions.sh |
| II. Kubernetes-Native Tooling | PASS | Question uses `kubectl patch` or `kubectl edit` |
| III. Automated Scoring | PASS | score_q8() updated to validate RollingUpdate config |
| IV. Exam Fidelity | PASS | RollingUpdate strategy is valid CKAD topic |
| V. Idempotent Operations | PASS | No changes to script idempotency |
| VI. Modern UI | N/A | No UI changes |

**Gate Status**: PASSED - No violations

## Project Structure

### Documentation (this feature)

```text
specs/016-sim3-q8-update-strategy/
├── spec.md              # Feature specification
├── plan.md              # This file
├── research.md          # Current Q8 analysis
├── quickstart.md        # Validation steps
└── tasks.md             # Generated by /speckit.tasks
```

### Source Code (repository root)

```text
exams/ckad-simulation3/
├── questions.md         # Q8 section to update
├── solutions.md         # Q8 solution to update
└── scoring-functions.sh # score_q8() to update
```

**Structure Decision**: Content update only - modifying existing files in ckad-simulation3 directory. No new files or directories created.

## Q8 Differentiation Matrix

| Simulation | Current Q8 | New Q8 | Topic |
|------------|------------|--------|-------|
| ckad-simulation1 | Deployment Rollback | Unchanged | History + undo |
| ckad-simulation3 | Deployment Rollback | **Update Strategy** | maxSurge/maxUnavailable |

## New Q8 Design

### Question Content

**Title**: Deployment Update Strategy
**Namespace**: `ares` (unchanged)
**Resource**: `battle-app` (reuse existing Deployment)
**Points**: 6 (unchanged)

**Task**:
Configure the Deployment `battle-app` in namespace `ares` to use a RollingUpdate strategy with:
- `maxSurge: 2`
- `maxUnavailable: 1`

### Scoring Criteria (6 points)

1. Deployment exists (1 pt)
2. Strategy type is RollingUpdate (1 pt)
3. maxSurge is 2 (2 pts)
4. maxUnavailable is 1 (2 pts)

### Solution Approach

```bash
kubectl patch deployment battle-app -n ares -p '{
  "spec": {
    "strategy": {
      "type": "RollingUpdate",
      "rollingUpdate": {
        "maxSurge": 2,
        "maxUnavailable": 1
      }
    }
  }
}'
```

## Complexity Tracking

No constitution violations - no complexity justification needed.
